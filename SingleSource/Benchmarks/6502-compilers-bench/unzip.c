#include <stdint.h>

uint8_t unzip_buffer[32];
const uint8_t zipped_data[] = {
	0x00,0x84,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	                       1,   1,   2,   3,    4,   5,  0x40, 0x40, 0x40, 0x40, 0x40, 0x40,  0x40, 0x40, 0x40, 0x40,  0x40, 0x40,   1,   1,    2,   3,   4,   5, 0x00,0x08,
	                       6,   7,   8,   9,    10,  11, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,  0x40, 0x40, 0x40, 0x40,  0x40, 0x40,   6,   7,    8,   9,   10,  11,0x00,0x08,
	                       12,  13,  14,  15,   16,  17,  0x00,0x02, 0x01, 0x02, 0x03, 0x04,  0x05, 0x06, 0x07, 0x00,0x03,          12,  13,   14,  15,  16,  17,0x00,0x08,
	                       18,  19,  20,  21,   22,  23,  0x00,0x02, 0x08, 0x09, 0x0a, 0x0b,  0x0c, 0x0d, 0x0e, 0x0f,  0x00,0x02,    18,  19,   20,  21,  22,  23,0x00,0x08,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	                       24,  25,  26,  27,    28,  29, 0x00,0x02, 0x10, 0x11, 0x12, 0x13,  0x14, 0x15, 0x16, 0x17,  0x00,0x02,    24,  25,   26,  27,  28,  29,0x00,0x08,
	                       30,  31,  32,  33,    34,  35, 0x00,0x02, 0x18, 0x19, 0x1a, 0x1b,  0x1c, 0x1d, 0x1e, 0x1f,  0x00,0x02,    30,  31,   32,  33,  34,  35,0x00,0x08,
	                       36,  37,  38,  39,    40,  41,0x40, 0x40, 0x40, 0x40, 0x40, 0x40,  0x40, 0x40, 0x40, 0x40,  0x40, 0x40,   36,  37,   38,  39,  40,  41,0x00,0x08,
	                       42,  43,  44,  45,    46,  47,0x40, 0x40, 0x40, 0x40, 0x40, 0x40,  0x40, 0x40, 0x40, 0x40,  0x40, 0x40,   42,  43,   44,  45,  46,  47,0x00,0x07,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	               0x20,  0x21, 0x22, 0x23, 0x24,  0x25, 0x26, 0x27, 0x00,0x0a,                                             0x28, 0x21, 0x22,  0x23, 0x24, 0x25, 0x26,  0x27, 0x00,0x09,
	                               0x29, 0x2a,  0x00,0x10,                                                                            0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x10,                                                                            0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x10,                                                                            0x29, 0x2a, 0x00,0x0c,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	                               0x29, 0x2a,  0x00,0x04,             0x2b, 0x2c, 0x2c, 0x2c,  0x2c, 0x2c, 0x2c, 0x2d,  0x00,0x04,             0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x04,             0x2e, 0x2f, 0x30, 0x30,  0x30, 0x30, 0x30, 0x31,  0x00,0x04,             0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x04,             0x32, 0x33, 0x00,0x02,   0x30, 0x30, 0x30, 0x34,  0x00,0x04,             0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x04,             0x2e, 0x2f, 0x00,0x02,   0x30, 0x30, 0x30, 0x31,  0x00,0x04,             0x29, 0x2a, 0x00,0x06,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	0x35, 0x36, 0x37, 0x38,  0x39, 0x35, 0x29, 0x2a,  0x38, 0x39, 0x35, 0x36,  0x32, 0x33, 0x30, 0x30,  0x00,0x02,  0x30, 0x34,  0x35, 0x36, 0x37, 0x38,  0x29, 0x2a, 0x36, 0x37,  0x38, 0x39, 0x35, 0x36,
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x2e, 0x2f, 0x30, 0x30,  0x00,0x02,  0x30, 0x31,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x32, 0x33, 0x00,0x02,   0x30, 0x30, 0x30, 0x34,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x2e, 0x2f, 0x00,0x02,   0x30, 0x30, 0x30, 0x31,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x32, 0x33, 0x30, 0x30,  0x00,0x02,  0x30, 0x34,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x2e, 0x2f, 0x30, 0x30,  0x00,0x02,  0x30, 0x31,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	0x3a, 0x3a, 0x3a, 0x3a,  0x3a, 0x3a, 0x29, 0x2a,  0x3a, 0x3a, 0x3a, 0x3a,  0x32, 0x33, 0x00,0x02,   0x30, 0x30, 0x30, 0x34,  0x3a, 0x3a, 0x3a, 0x3a,  0x29, 0x2a, 0x3a, 0x3a,  0x3a, 0x3a, 0x3a, 0x3a,
	0x3f, 0x3f, 0x3f, 0x3f,  0x3f, 0x3f, 0x29, 0x2a,  0x3f, 0x3f, 0x3f, 0x3f,  0x2e, 0x2f, 0x00,0x02,   0x30, 0x30, 0x30, 0x31,  0x3f, 0x3f, 0x3f, 0x3f,  0x29, 0x2a, 0x3f, 0x3f,  0x3f, 0x3f, 0x3f, 0x3f,
	//-----------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------  -------------------
	0x00,0x06,                       0x29, 0x2a,  0x00,0x04,             0x32, 0x33, 0x30, 0x30,  0x30, 0x30, 0x30, 0x34,  0x00,0x04,             0x29, 0x2a, 0x00,0x0c,
	                               0x29, 0x2a,  0x00,0x04,             0x2e, 0x2f, 0x30, 0x30,  0x30, 0x30, 0x30, 0x31,  0x00,0x04,             0x29, 0x2a, 0x00,0x06,
	0x00,0x00,
};

static void get_unzipped_bytes(uint8_t const* zipped, uint16_t offset, uint8_t count) {
	uint8_t zero_count = 0;
	uint8_t dest = 0;

	// Skip uncompressed bytes until reaching offset
	while (offset != 0) {
		if (zero_count != 0) {
			--zero_count;
			--offset;
		}else {
			if (*zipped != 0) {
				--offset;
				++zipped;
			}else {
				zero_count = *(zipped + 1);
				zipped += 2;
			}
		}
	}

	// Store count uncompressed bytes in mem buffer
	while (dest != count) {
		if (zero_count != 0) {
			unzip_buffer[dest] = 0;
			++dest;
			--zero_count;
		}else {
			if (*zipped != 0) {
				unzip_buffer[dest] =  *zipped;
				++dest;
				++zipped;
			}else {
				zero_count = *(zipped + 1);
				zipped += 2;
			}
		}
	}
}

int main(void) {
	get_unzipped_bytes(zipped_data, 0x3a8, 16);
    return 0;
}
